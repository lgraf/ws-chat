<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset=utf-8>
	<title>Amazing Web Socket Chat</title>
	<script type="text/javascript" src="resources/js/jquery-1.7.1.js"></script>
	<script type="text/javascript" src="resources/js/jquery.json-2.3.js"></script>
	<script type="text/javascript" src="resources/js/jquery.websocket-0.0.1.js"></script>
	<script type="text/javascript">
		$(document).ready( function(evt) {
			var ws = $.websocket($('#tf-server-url').val(), {
				open : function() {
					alert('open');
				},
	
				close : function() {
					alert('close');
				},
	
				events : {
					chat : function(e) {
						var message = e.data;
						if(undefined !== message)
							$('#ta-chat').append( message + '\n');
					}
				}
			});
			
			$('#btn-send').click(function() {
				var messageField = $('#tf-message');
				ws.send('chat', messageField.val());
				messageField.val('');
				messageField.focus();
			});
		});
	</script>
</head>

<body>
	<table>
		<tr>
			<td>Server-URL</td>
			<td><input id="tf-server-url" value="ws://localhost:8080" /></td>
			<td><button id="btn-connect">Connect</button></td>
		</tr>
		<tr>
			<td>Message</td>
			<td><input id="tf-message" /></td>
			<td><button id="btn-send">Send</button></td>
		</tr>
		<tr>
			<td>Response</td>
			<td colspan="2"><textarea id="ta-chat" style="width: 100%;"></textarea></td>
		</tr>
	</table>
</body>
</html>